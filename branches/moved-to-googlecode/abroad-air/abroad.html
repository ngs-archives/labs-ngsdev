<html>
    <head>
        <script type="text/javascript" src="AIRAliases.js">
        </script>
        <script type="text/javascript">
            // AIR-related functions created by the developer
            // reads the content of a local text file
            function readLocalFile(){
                var f = air.File.applicationResourceDirectory.resolvePath("LocalFile.txt");
				
                var fs = new air.FileStream();
                fs.open(f, air.FileMode.READ);
                var content = fs.readUTFBytes(fs.bytesAvailable);
                fs.close();
                
                return content;
            }
            // create an object that will be used to expose AIR functionality (developer functions) to the browser sandbox
            var Exposed = {};
            // expose the trace method
            Exposed.trace = function(str){
                air.trace(str);
            }
            // expose the read app function
            Exposed.readLocalFile = readLocalFile;
            function doLoad(){
                // place Exposed on the parentSandboxBridge property of the browser sandbox
                var frame = document.getElementById('UI').contentWindow.parentSandboxBridge = Exposed;
                
                // get the functions exposed from the Browser Sandbox
                window.callMe = document.getElementById('UI').contentWindow.childSandboxBridge.callMe;
            }
        </script>
    </head>
    <body onload="doLoad();">
        <h3>Application Sandbox Content</h3>
        <ul>
            <li>
                Has access to AIR APIs 
                <br/>
                <input type="button" onclick="alert(readLocalFile())" value="Read a local file using AIR APIs"/>
            </li>
            <li>
                Cannot transform strings into code (<strong>cannot use eval</strong>)
            </li>
            <li>
                Can only load JavaScript files from the application folder
            </li>
            <li>
                Can expose functions to the Browser Sandbox using the SandboxBridge (the parentSandboxBridge property on the iframe window object)
            </li>
            <li>
                Can call functions from the Browser Sandbox exposed by the developer via SandboxBridge (the childSandboxBridge property on the iframe window object): <input type="button" onclick="alert(callMe())" value="Call a function from the Browser Sandbox"/>
            </li>
        </ul>
        
        
       <!-- SomeRemoteDomain.com is a generic domain in order to place ui.html content
        	in a remote sandbox. -->
        	
        <iframe id="UI"
            src="SampleUI.html"
            sandboxRoot="http://SomeRemoteDomain.com/"
            documentRoot="app-resource:/"
            width="100%" 
            height="100%"
            style="border: 1px solid red; margin: 0px; padding: 0px; width: 100%; height: 300px">
        </iframe>
        
    </body>
</html>
